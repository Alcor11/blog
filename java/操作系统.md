## 操作系统结构

- 寄存器
  - 程序计数器
  - 堆栈指针




### 堆和栈的区别

1. 申请方式不同：栈由系统自动分配，堆事人为申请开辟
2. 申请大小：栈的空间较小、堆的空间大
3. 申请效率不同：栈的效率快、堆效率慢
4. 存储的内容不同：栈存储函数调用语句的下一条可执行内容，而堆一般是在头部用一个字节存放堆的大小，堆中的具体内容是人为安排;
5. 底层不同：栈空间连续、堆空间不连续。

### 进程和线程的区别

[进程和线程](https://blog.csdn.net/weixin_49199646/article/details/109210547)
**进程**是某个数据集合上的一次运行活动，是资源调度的独立单位
*是操作系统资源分配和独立运行的最小单位*
进程有独立的地址空间，如果进程崩溃不影响其他进程
进程上下文切换开销大

**线程**是进程的一个实体，是CPU调度的基本单位，线程往往不独立拥有资源，只拥有一点必备的资源：程序计数器、寄存器和栈。可以和同一进程上其他线程共享
*任务调度和系统执行的最小单位*
进程中的多个线程共享进程的地址空间，一个线程的非法操作会使整个进程崩溃。
线程上下文切换开销小

**协程**是轻量级的线程，用户态


###  进程和线程的通信方式

- 进程间通信：
  *pipe 管道* ：半双工，数据单向流动，并且只能在父子进程间通信
  *namedpipe 有名管道* ：半双工，允许无亲缘的通信
  *信号量(semophore )*：进程间、统一进程内不同线程的通信手段，是一个计数器，可以作为锁
  *消息队列 mq* ：存放在内核中并由消息队列标识符标识。相比管道，客服了只能承载无格式字节流以及缓冲区大小受限的缺点。
  *信号signal* ：接收事件
  *共享内存(shared memory )*：由一个进程创建，多个进程访问的一段映射内存。效率最高
  **套接字(socket )** ：可以用于不同机器间的通信

- 虚拟内存和物理内存

- linux 按 ctrl + c 中断的原理

### 协程高效在哪

在用户态，无需在内核态和用户态之间上下文切换。

### 异步和同步、阻塞和非阻塞之间的区别？

### 为什么要分内核态和用户态?

1. 安全性，内核态的数据不能被用户读取到

### MESI缓存一致性协议

1. CPU缓存的目的：解决速度不匹配。


### 操作系统内存管理分段分页

- 分页：对用户不可见，分段对用户可见
- 分页的地址是一维的，分段是二维的
  分页的目的：提高内存利用率，不回产生外部碎片，只有少量内存碎片。
  分段：可以方便按照逻辑模块实现信息的共享和保护。会产生外部碎片。

### 操作系统调度算法

先来先服务

最短作业优先

最短剩余时间优先

- 交互式系统调度
  轮询调度
  优先级调度
  最短进程优先
  彩票调度
  公平分享调度

### 页面置换算法

![](https://alcor-1306883605.cos.ap-shanghai.myqcloud.com/my/SWwuY2.png)

### 僵尸进程

1. 一个进程使用fork创建子进程，如果子进程退出，而父进程还没调用wait或者waitpid获取子进程的状态信息，那么子进程的进程描述符仍然保存在系统中。

### 孤儿进程

1. 一个父进程退出，而它的一个或多个子进程还在运行，那么这些子进程会成为孤儿进程。



